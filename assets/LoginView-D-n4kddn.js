import{O as b,d as _,u as C,a as E,r as m,o as k,c as $,b as t,e as v,f as l,w as g,v as q,g as I,h as S,i as V,j as A,F as B}from"./index-CNNw0ILM.js";import{r as h,i as y}from"./request-ImmOSN77.js";const P="/Netease/5FCFB688BF47CEA5FED5BAB01605BE50.png";class Q{static getQuickKey(){return h(b,{method:"GET",url:"/login/qr/key"})}}class T{static getQuickImg(n,o=!1){return h(b,{method:"GET",url:"/login/qr/create",query:{key:n,qrimg:o}})}}class L{static getPhoneSend(n){return h(b,{method:"GET",url:"/captcha/sent",query:{phone:n}})}}class F{static getPhonePhone(n,o){return h(b,{method:"GET",url:"/login/cellphone",query:{phone:n,captcha:o}})}}class G{static getEmail(n,o){return h(b,{method:"GET",url:"/login",query:{email:n,password:o}})}}class U{static getStatus(n){return h(b,{method:"GET",url:"/login/qr/check",query:{key:n}})}}const j={class:"flex flex-col gap-4"},N={class:"flex gap-4"},D={class:"flex flex-col items-center gap-4"},K={class:"input input-bordered flex items-center gap-2"},O={class:"flex flex-col items-center gap-4"},R={class:"input input-bordered flex items-center gap-2"},M=_({__name:"PhoneView",emits:["qw"],setup(d,{emit:n}){const o=C(),f=E();let r=m(!0),c=m({phone:"",captcha:""});const x=async()=>{await L.getPhoneSend(c.value.phone).then(s=>{console.log(s)})},u=async()=>{await F.getPhonePhone(c.value.phone,c.value.captcha).then(s=>{localStorage.setItem("cookie",s.cookie),localStorage.setItem("id",String(s.account.id));let e=f.query.originPath;typeof e=="string"?o.push(e):(Array.isArray(e)&&e.length>0,o.push("/"))})};let i=()=>(r.value=!1,x()),a=()=>u();const w=n;return(s,e)=>(k(),$("div",j,[t("div",N,[v(l(y.Icon),{icon:"ic:twotone-arrow-back-ios",class:"w-6 h-6",style:{color:"black"},onClick:e[0]||(e[0]=p=>w("qw"))}),e[5]||(e[5]=t("p",{class:"text-xl"},"手机号登录",-1))]),e[8]||(e[8]=t("div",{class:"fixed bottom-0"},[t("img",{src:P,alt:""})],-1)),g(t("div",D,[t("label",K,[e[6]||(e[6]=t("select",{class:"select w-full max-w-xs"},[t("option",null,"+86"),t("option",null,"+1"),t("option",null,"+2")],-1)),g(t("input",{type:"text",class:"grow",placeholder:" 请输入手机号","onUpdate:modelValue":e[1]||(e[1]=p=>l(c).phone=p)},null,512),[[I,l(c).phone]])]),t("button",{onClick:e[2]||(e[2]=(...p)=>l(i)&&l(i)(...p)),class:"btn btn-secondary bg-primary rounded-full w-4/5"}," 下一步 ")],512),[[q,l(r)]]),g(t("div",O,[t("label",R,[e[7]||(e[7]=S(" 验证码 ")),g(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=p=>l(c).phone=p),class:"grow",placeholder:"请输入验证码"},null,512),[[I,l(c).phone]])]),t("button",{onClick:e[4]||(e[4]=(...p)=>l(a)&&l(a)(...p)),class:"btn btn-secondary bg-primary rounded-full w-4/5"}," 登录 ")],512),[[q,!l(r)]])]))}}),z={class:"flex flex-col gap-4"},H={class:"flex gap-4"},J={class:"flex flex-col items-center gap-4"},W={class:"input input-bordered flex items-center gap-2"},X={class:"flex flex-col items-center gap-4"},Y={class:"input input-bordered flex items-center gap-2"},Z=_({__name:"EmailView",emits:["qw"],setup(d,{emit:n}){const o=C(),f=E();let r=m(!0);const c=async()=>{await G.getEmail(u.value.email,u.value.password).then(w=>{localStorage.setItem("cookie",w.cookie),localStorage.setItem("id",String(w.account.id));let s=f.query.originPath;typeof s=="string"?o.push(s):(Array.isArray(s)&&s.length>0,o.push("/"))})},x=n;let u=m({email:"",password:""}),i=()=>c(),a=()=>{r.value=!1};return(w,s)=>(k(),$("div",z,[t("div",H,[v(l(y.Icon),{icon:"ic:twotone-arrow-back-ios",class:"w-6 h-6",style:{color:"black"},onClick:s[0]||(s[0]=e=>x("qw"))}),s[5]||(s[5]=t("p",{class:"text-xl"},"邮箱登录",-1))]),s[8]||(s[8]=t("div",{class:"fixed bottom-0"},[t("img",{src:P,alt:""})],-1)),g(t("div",J,[t("label",W,[s[6]||(s[6]=S(" 邮箱 ")),g(t("input",{type:"text",class:"grow",placeholder:"请输入邮箱@163.com","onUpdate:modelValue":s[1]||(s[1]=e=>l(u).email=e)},null,512),[[I,l(u).email]])]),t("button",{onClick:s[2]||(s[2]=(...e)=>l(a)&&l(a)(...e)),class:"btn btn-secondary bg-primary rounded-full w-4/5"}," 下一步 ")],512),[[q,l(r)]]),g(t("div",X,[t("label",Y,[s[7]||(s[7]=S(" 密码 ")),g(t("input",{type:"text",class:"grow",placeholder:"请输入密码","onUpdate:modelValue":s[3]||(s[3]=e=>l(u).password=e)},null,512),[[I,l(u).password]])]),t("button",{onClick:s[4]||(s[4]=(...e)=>l(i)&&l(i)(...e)),class:"btn btn-secondary bg-primary rounded-full w-4/5"}," 登陆 ")],512),[[q,!l(r)]])]))}}),ee={class:"flex gap-4 flex-col"},te={class:"flex gap-4"},se={class:"flex flex-col items-center"},le=["src"],oe=_({__name:"QuickView",emits:["qw"],setup(d,{emit:n}){const o=C(),f=E();let r=m(""),c=m("");const x=n;(async()=>{await Q.getQuickKey().then(s=>{console.log(s.data.unikey),r.value=s.data.unikey,console.log(r.value)}),await T.getQuickImg(r.value,!0).then(s=>{console.log(r.value),console.log(s.data.qrimg),c.value=s.data.qrimg,console.log(c.value)}),w()})();let i;const a=()=>{i&&(clearInterval(i),i=void 0)},w=()=>{i=setInterval(async()=>{try{const s=await U.getStatus(r.value);switch(s.code){case 800:console.log("二维码过期"),a();break;case 801:console.log("等待扫码");break;case 802:console.log("待确认"),a();break;case 803:console.log("登录成功"),console.log(s),alert("登录成功"),localStorage.setItem("user",s.cookie);let e=f.query.originPath;typeof e=="string"?o.push(e):(Array.isArray(e)&&e.length>0,o.push("/")),a();break;default:console.log("接口出错"),a();break}}catch(s){console.error("请求出错:",s),a()}},2e3)};return(s,e)=>(k(),$("div",ee,[t("div",te,[v(l(y.Icon),{icon:"ic:twotone-arrow-back-ios",class:"w-6 h-6",style:{color:"black"},onClick:e[0]||(e[0]=p=>x("qw"))}),e[1]||(e[1]=t("p",{class:"text-xl"},"二维码登录",-1))]),t("div",se,[e[2]||(e[2]=t("div",{class:"text-xl"},"请扫描二维码",-1)),t("img",{src:l(c),alt:""},null,8,le)]),e[3]||(e[3]=t("div",{class:"fixed bottom-0"},[t("img",{src:P,alt:""})],-1))]))}}),ne={class:"h-screen flex flex-col gap-4 p-4 bg-primary",id:"type"},ie={class:"flex items-center justify-center h-full"},ae={class:"flex justify-around"},re={class:"flex justify-around"},de=_({__name:"LoginView",setup(d){let n=m(!0),o=m(null),f=()=>{n.value=!1,o.value=M},r=()=>{n.value=!1,o.value=Z},c=()=>{n.value=!1,o.value=oe},x=()=>{n.value=!0,o.value=null};return(u,i)=>(k(),$(B,null,[g(t("div",ne,[t("div",ie,[v(l(y.Icon),{icon:"simple-icons:neteasecloudmusic",class:"h-28 w-28 text-[white]"})]),t("div",ae,[t("button",{onClick:i[0]||(i[0]=(...a)=>l(f)&&l(f)(...a)),class:"btn btn-outline rounded-full bg-white text-primary"}," 手机号登录 "),t("button",{onClick:i[1]||(i[1]=(...a)=>l(r)&&l(r)(...a)),class:"btn btn-outline rounded-full bg-white text-primary"}," 邮箱登录 "),t("button",{onClick:i[2]||(i[2]=(...a)=>l(c)&&l(c)(...a)),class:"btn btn-outline rounded-full bg-white text-primary"}," 二维码登录 ")]),t("div",re,[v(l(y.Icon),{icon:"ic:baseline-wechat",class:"h-9 w-9 text-[white]"}),v(l(y.Icon),{icon:"mingcute:qq-fill",class:"h-9 w-9 text-[white]"}),v(l(y.Icon),{icon:"fa:weibo",class:"h-9 w-9 text-[white]"})]),i[3]||(i[3]=t("div",{class:"flex justify-center"},[t("input",{type:"checkbox"}),t("p",{class:"text-xs text-[white]"}," 同意 《用户协议》 《隐私政策》 《儿童隐私政策》 ")],-1))],512),[[q,l(n)]]),(k(),V(A(l(o)),{onQw:l(x)},null,40,["onQw"]))],64))}});export{de as default};
